name: Veille technologique automatique

on:
  schedule:
    - cron: "0 7 * * *"   # Tous les jours Ã  07h
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-veille:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ RÃ©cupÃ©ration du dÃ©pÃ´t
      uses: actions/checkout@v4

    - name: ğŸ Installation Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'

    - name: ğŸ“¦ DÃ©pendances
      run: pip install feedparser

    - name: ğŸ”„ Mise Ã  jour des articles
      run: python veille_rss.py

    - name: ğŸ’¾ Commit automatique
      run: |
        git config user.name "github-actions"
        git config user.email "actions@github.com"
        git add veilles-data/*.json
        git commit -m "ğŸ”„ Mise Ã  jour automatique de la veille" || echo "Aucune modification"
        git push
