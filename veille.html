<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veille Technologique - BTS SIO SISR</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height:1.6; color:#333; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height:100vh; }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        header { text-align:center; margin-bottom:40px; color:white; }
        header h1 { font-size:2.5em; margin-bottom:10px; text-shadow:2px 2px 4px rgba(0,0,0,0.3); }
        header p { font-size:1.2em; opacity:0.9; }
        .stats { background:rgba(255,255,255,0.1); padding:15px; border-radius:10px; margin:20px 0; color:white; display:flex; justify-content:space-around; flex-wrap:wrap; }
        .stat-item { text-align:center; }
        .veille-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(500px, 1fr)); gap:30px; margin-bottom:40px; }
        .sujet { background:white; border-radius:15px; padding:30px; box-shadow:0 10px 30px rgba(0,0,0,0.2); transition:transform 0.3s ease; }
        .sujet:hover { transform:translateY(-5px); }
        .sujet-iam { border-left:5px solid #e74c3c; }
        .sujet-automation { border-left:5px solid #3498db; }
        .sujet h2 { color:#2c3e50; margin-bottom:20px; display:flex; align-items:center; gap:10px; }
        .description { background:#f8f9fa; padding:15px; border-radius:8px; margin-bottom:20px; font-size:0.95em; }
        .sources, .concepts { margin-top:25px; }
        .sources h3, .concepts h3, .actualites h3 { color:#34495e; margin-bottom:15px; border-bottom:2px solid #ecf0f1; padding-bottom:5px; }
        ul { list-style:none; }
        li { margin-bottom:8px; padding-left:20px; position:relative; }
        li:before { content:"‚ñ∏"; position:absolute; left:0; color:#667eea; }
        .article-link { background:#28a745; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; text-decoration:none; display:inline-block; font-size:14px; transition:background 0.3s ease; margin-top:10px; font-family:inherit; }
        .article-link:hover { background:#218838; color:white; text-decoration:none; }
        .actualite-item { background:#f8f9fa; padding:15px; border-radius:8px; margin-bottom:15px; border-left:4px solid #667eea; transition:transform 0.2s ease; position:relative; }
        .actualite-item:hover { transform:translateX(5px); }
        .date { font-size:0.9em; color:#7f8c8d; font-weight:bold; display:block; margin-bottom:5px; }
        .source-badge { background:#667eea; color:white; padding:2px 8px; border-radius:12px; font-size:0.8em; margin-left:10px; }
        .new-badge { background:#e74c3c; color:white; padding:2px 6px; border-radius:8px; font-size:0.7em; margin-left:5px; }
        .loading { text-align:center; padding:40px; color:#7f8c8d; }
        .spinner { border:4px solid #f3f3f3; border-top:4px solid #667eea; border-radius:50%; width:40px; height:40px; animation:spin 2s linear infinite; margin:0 auto 20px; }
        @keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } }
        .controls { text-align:center; margin:20px 0; }
        .btn { background:#667eea; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; margin:0 10px; transition:background 0.3s ease; }
        .btn:hover { background:#764ba2; }
        .article-count { background:#2ecc71; color:white; padding:10px 15px; border-radius:20px; font-size:0.9em; margin-left:10px; }
        .auto-update-status { background:#3498db; color:white; padding:10px; border-radius:8px; margin:10px 0; text-align:center; }
        @media (max-width:768px) { .veille-grid { grid-template-columns:1fr; } header h1 { font-size:2em; } .stats { flex-direction:column; gap:10px; } }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>üîç Veille Technologique Automatique</h1>
        <p>BTS SIO SISR - Accumulation automatique des articles</p>
        <div class="stats">
            <div class="stat-item"><strong>üîÑ Mise √† jour</strong><div>Automatique tous les jours</div></div>
            <div class="stat-item"><strong>üì∞ Articles stock√©s</strong><div id="total-articles">Chargement...</div></div>
            <div class="stat-item"><strong>üíæ Historique</strong><div>Conservation illimit√©e</div></div>
        </div>
    </header>

    <div id="veille-content">
        <div class="loading"><div class="spinner"></div><p>Chargement des articles...</p></div>
    </div>

    <div class="auto-update-status">
        <p>üîÑ Prochaine mise √† jour automatique : <span id="next-update">--:--</span></p>
        <p>üìÖ Derni√®re actualisation : <span id="last-update">--:--</span></p>
    </div>
</div>

<script>
async function loadJSON(file) {
    const res = await fetch(file);
    return await res.json();
}

async function displayVeille() {
    const iamData = await loadJSON('veilles-data/iam-zero-trust.json');
    const devData = await loadJSON('veilles-data/network-automation.json');
    const allData = [iamData, devData];
    let html = '<div class="veille-grid">';
    let totalArticles = 0;

    allData.forEach(theme => {
        totalArticles += theme.articles.length;
        html += `<div class="sujet ${theme.theme.includes('IAM') ? 'sujet-iam' : 'sujet-automation'}">
                    <h2>${theme.theme} <span class="article-count">${theme.articles.length} articles</span></h2>
                    <div class="description"><p><strong>${theme.theme}</strong></p></div>
                    <div class="actualites"><h3>üì∞ Articles</h3>`;
        if(theme.articles.length===0){
            html+='<p>üìù Aucun article pour le moment.</p>';
        } else {
            theme.articles.forEach(article => {
                html+=`<div class="actualite-item">
                            <span class="date">${article.period}</span>
                            <span class="source-badge">${article.source}</span>
                            <p><strong>${article.title}</strong></p>
                            <p>${article.analysis}</p>
                            <button class="article-link" onclick="window.open('${article.link}','_blank')">üìñ Lire l'article complet</button>
                        </div>`;
            });
        }
        html+='</div></div>';
    });
    html+='</div>';
    document.getElementById('veille-content').innerHTML = html;
    document.getElementById('total-articles').textContent = totalArticles + " articles";

    const now = new Date();
    document.getElementById('last-update').textContent = now.toLocaleString('fr-FR');
    const next = new Date(now.getTime()+24*60*60*1000);
    document.getElementById('next-update').textContent = next.toLocaleString('fr-FR');
}

document.addEventListener('DOMContentLoaded', displayVeille);
</script>
</body>
</html>
